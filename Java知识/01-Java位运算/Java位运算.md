# Java位运算

> 更新时间：2019-03-27



位运算分为逻辑运算符和移位运算符。先熟悉下计算机中原码，补码，反码的概念

### 机器数

一个数在计算机中的二进制表示形式,  叫做这个数的机器数。机器数是带符号的，在计算机用一个数的最高位存放符号, 正数为0, 负数为1.

比如，十进制中的数 3 ，计算机字长为8位，转换成二进制就是00000011。如果是 -3 ，就是 10000011 。

那么，这里的 00000011 和 10000011 就是机器数。

### 真值
因为第一位是符号位，所以机器数的形式值就不等于真正的数值。例如上面的有符号数 10000011，其最高位1代表负，其真正数值是 -3 而不是形式值131（10000011转换成十进制等于131）。所以，为区别起见，将带符号位的机器数对应的真正数值称为机器数的真值。

例：0000 0001的真值 = +000 0001 = +1，1000 0001的真值 = –000 0001 = –1

### 原码
原码就是符号位加上真值的绝对值, 即用第一位表示符号, 其余位表示值。

比如8位二进制:

十进制1 = 0000 0001

十进制-1 = 1000 0001

因为第一位是符号位, 所以8位二进制数的取值范围就是:
[1111 1111 , 0111 1111]

十进制就是：[-127 , 127]

### 反码
正数的反码是其本身

负数的反码在其原码的基础上符号位不变，其余位取反

十进制：1 = 原码：0000 0001 = 反码：0000 0001

十进制：-1 = 原码：1000 0001 = 反码：1111 1110


### 补码
正数的补码是其本身

负数的补码在其原码的基础上，符号位不变，其余各位取反，最后+1

十进制：1 = 原码：0000 0001 = 补码：0000 0001

十进制：-1 = 原码：1000 0001 = 补码：1111 1111

### 为什么会有原码、反码、补码？
原码是给人看的；反码是为了给计算机运算的；但是计算机运算的时候，+0和-0都是0但是却有两种不同的编码表达方式，为了解决这个问题，就有了反码
```
反码运算 1-1
1 - 1 = 1 + （-1）= 原码：0000 0001 + 1000 0001 = 反码：0000 0001 +反码： 1111 1110 = 反码：1111 1111 = 原码：1000 0000 = -0 

补码运算 1-1
1 - 1 = 1 + （-1）= 原码：0000 0001 + 1000 0001 = 补码：0000 0001 +补码： 1111 1111 = 补码：0000 0000 = 原码：0000 0000 = 0 
```

### 小结
对于正数来说，原码反码补码都一样；

对于负数来说，反码在原码的基础上符号位不变，其余位取反，补码在原码的基础上符号位不变，其余位取反加1


### 逻辑运算符

- ~ 取反
```
// 按位取反运算符翻转操作数的每一位，即0变成1，1变成0
十进制3 = 二进制：0000 0011 = 取反：～3 = 二进制：1111 1100 = 十进制：252
```
- & 与
```
// 每个位相与，有0出0，否则为1
十进制：3 = 二进制：0000 0011
十进制：5 = 二进制：0000 0101
结果 = 十进制：1 = 二进制：0000 0001
```
- | 或
```
// 每个位相或，有1出1，否则为0
十进制：3 = 二进制：0000 0011
十进制：5 = 二进制：0000 0101
结果 = 十进制：7 = 二进制：0000 0111
```
- ^ 异或
```
// 每个位相同出0，否则为1
十进制：3 = 二进制：0000 0011
十进制：5 = 二进制：0000 0101
结果 = 十进制：6 = 二进制：0000 0110
```

### 移位运算符
-  ·>> 右移动
```
// 按位右移，高位补0
十进制：8 = 二进制：0000 1000 = 8 >> 1 = 十进制：4
```
- <<· 左移
```
// 按位左移，低位补0
十进制：8 = 二进制：0000 1000 = 8 << 1 = 十进制：16
```
- ·>>> 无符号右移
```
// 和右移一样，但它右移时，符号位也会被移动，被高位的0补充，也就是说得到的是正数了
十进制：-8 = 二进制：1000 1000 = 8 >>> 1 = 二进制：0100 0100 = 十进制：68
```

### 参考
- [很棒的一篇博客](https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/ComputerCode.html)

- [在线进制转换工具](http://tool.oschina.net/hexconvert/)